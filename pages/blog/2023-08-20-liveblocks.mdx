# 基于 Liveblocks 快速打造实时协作应用

![1](https://jetzihan-img.oss-cn-beijing.aliyuncs.com/img_v2_25abb81f-653c-4fd2-9284-585aaf2c6d5g.gif)

## 什么是实时协作应用

实时协作应用是指多个用户同时对同一个应用进行操作，而且所有用户都能看到其他用户的操作，这种应用通常用于多人协作编辑、多人游戏等场景。

2006年，经过多年的开发，谷歌推出了基于浏览器的实时协作 Microsoft Word 竞争对手。这种方法彻底改变了人们共同工作的方式，使他们能够实时高效地协作，同时还可以通过评论进行异步协作，不再需要断断续续的电子邮件线程和文件的传递。随着谷歌不断获得市场份额，微软被迫在 Microsoft Word 和更广泛的 Microsoft Office 生态系统中直接构建类似的协作功能，以便进行竞争。

大约十年后，Figma用他们基于浏览器的多人设计工具彻底颠覆了整个软件设计行业，随后甩开了领先的公司。Figma 允许多个设计师同时在同一设计文件上工作，而不会出现任何冲突。如今，除了 Figma 外，还诞生了诸如飞书、即时设计等实时协作应用。

Liveblocks 是一个实时协作应用程序的基础设施，它可以让你快速构建实时协作应用程序，而不必担心基础设施的复杂性。

## 工作原理

Liveblocks 是一个用于构建高性能协作体验的实时协作基础架构。Liveblocks 的基础是建立在四个核心概念之上：产品、房间、集成和平台。

### 产品

Liveblocks 是一个完全集成的解决方案，围绕核心产品构建，每个产品都能实现协作体验的不同方面：Presence（在线状态）、Broadcast（广播）、Storage（存储）和 Comments（评论）。可以根据自身需求和想要构建的协作体验来决定使用哪些产品。

### 房间

房间是人们进行协作的数字空间。可以要求用户进行身份验证以与房间互动，每个房间都可以具有特定的权限和与之相关联的元数据(Metadata)。

### 集成

Liveblocks 及其社区提供了开发者可以用来与房间内的 Liveblocks 产品集成的集成工具。您可以使用现有的集成来针对特定库和框架进行集成，也可以根据需求创建自定义集成。

### 平台

Liveblocks 提供一个完全托管的平台，围绕 WebSocket 基础架构构建，可扩展到数百万用户。通过该平台，可以获得许多强大的工具，如 REST API、Webhooks、DevTools、模式验证、分析等。

[//]: # (## 快速开始)

[//]: # ()
[//]: # (> 此部分大部分内容翻译自 [Liveblocks Docs]&#40;https://liveblocks.io/docs/tutorial/react/getting-started/welcome&#41;，如果想获得更好的阅读体验，建议直接阅读原文。)

[//]: # ()
[//]: # (该部分将通过编写一个基于 React 的实时协作应用程序来介绍 Liveblocks。)

[//]: # ()
[//]: # (### 创建项目)

[//]: # ()
[//]: # (创建一个新的 React 应用程序，修改 `App.ts` 文件，将其内容替换为以下内容：)

[//]: # ()
[//]: # (```tsx)

[//]: # (export const ready = true;)

[//]: # (```)

[//]: # ()
[//]: # (### 安装 Liveblocks)

[//]: # ()
[//]: # (使用 npm 或 yarn 安装 Liveblocks：)

[//]: # ()
[//]: # (```bash)

[//]: # (npm install @liveblocks/client @liveblocks/react)

[//]: # (```)

[//]: # ()
[//]: # (安装完包之后，您可以通过配置文件初始化一个 Liveblocks 项目:)

[//]: # ()
[//]: # (```bash)

[//]: # (npx create-liveblocks-app@latest --init)

[//]: # (```)

[//]: # ()
[//]: # (这将创建一个名为 `liveblocks.config.ts` 的文件:)

[//]: # ()
[//]: # (```ts)

[//]: # (import { createClient } from "@liveblocks/client";)

[//]: # (import { createRoomContext } from "@liveblocks/react";)

[//]: # ()
[//]: # (const client = createClient&#40;{)

[//]: # (  publicApiKey: "pk_dev_RdMHp_LhLX2AMCI9cXE0-1OwA1hTflJJca1uOkVQY97cKlTQ6Q0HLCgn0Z577NDa",)

[//]: # (}&#41;;)

[//]: # ()
[//]: # (type Presence = {};)

[//]: # (type Storage = {};)

[//]: # (type UserMeta = {};)

[//]: # (type RoomEvent = {};)

[//]: # ()
[//]: # (export const {)

[//]: # (  suspense: {)

[//]: # (    // RoomProvider,)

[//]: # (    useRoom,)

[//]: # (    useMyPresence,)

[//]: # (    useUpdateMyPresence,)

[//]: # (    useSelf,)

[//]: # (    useOthers,)

[//]: # (    useOthersMapped,)

[//]: # (    useOthersConnectionIds,)

[//]: # (    useOther,)

[//]: # (    useBroadcastEvent,)

[//]: # (    useEventListener,)

[//]: # (    useErrorListener,)

[//]: # (    useStorage,)

[//]: # (    useObject,)

[//]: # (    useMap,)

[//]: # (    useList,)

[//]: # (    useBatch,)

[//]: # (    useHistory,)

[//]: # (    useUndo,)

[//]: # (    useRedo,)

[//]: # (    useCanUndo,)

[//]: # (    useCanRedo,)

[//]: # (    useMutation,)

[//]: # (  },)

[//]: # (} = createRoomContext<Presence, Storage, UserMeta, RoomEvent>&#40;client&#41;;)

[//]: # (```)

[//]: # (连接到 Liveblocks 的第一步是创建一个客户端，该客户端将负责与后端进行通信。可以通过在配置文件中修改 createClient 来实现这一点，并传递公共API密钥。)
